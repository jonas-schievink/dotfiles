#!/bin/bash

# TODO: Use `set -o errexit` and make this script more robust

# Script to initialize my desktop session when using a window manager
# and not a DE.
# Should be kept X11/Wayland agnostic.
# Basically, an "Autostart" file.

# Start a host and monitor specific polybar
for monitor in $(xrandr --listmonitors | tail -n +2 | awk '{print $NF}'); do
    bar="$(hostname)-$monitor"
    echo "Starting polybar '$bar'"
    polybar "$bar" &
done

pasystray &
mpd

# Start a notification server
/usr/lib/xfce4/notifyd/xfce4-notifyd &

# When installed, start the NetworkManager applet
nm-applet &

